<div id="sales-drilldown">
  <h3>Orders for: {{ item|default:"All Items" }}</h3>

  {% if orders and orders.object_list %}
  <table class="table">
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Date</th>
        <th>Total</th>
        <th>Payment Method</th>
        <th>Invoice</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders.object_list %}
      <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.created_at }}</td>
        <td>{{ order.total_amount }}</td>
        <td>{% if order.invoice %}{{ order.invoice.payment_method }}{% else %}-{% endif %}</td>
        <td>{% if order.invoice %}INV-{{ order.invoice.invoice_id }}{% else %}-{% endif %}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if orders.has_other_pages %}
  <nav aria-label="Page navigation">
    <ul class="pagination">
      {% if orders.has_previous %}
      <li class="page-item">
        <a class="page-link" hx-get="?page={{ orders.previous_page_number }}&item={{ item }}" hx-target="#reportResults">Previous</a>
      </li>
      {% endif %}

      <li class="page-item disabled"><span class="page-link">Page {{ orders.number }} of {{ orders.paginator.num_pages }}</span></li>

      {% if orders.has_next %}
      <li class="page-item">
        <a class="page-link" hx-get="?page={{ orders.next_page_number }}&item={{ item }}" hx-target="#reportResults">Next</a>
      </li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}

  {% else %}
    <p>No orders found for this item in the selected range.</p>
  {% endif %}
</div>
