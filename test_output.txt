Creating test database for alias 'default'...
Found 2 test(s).
System check identified no issues (0 silenced).
EF
======================================================================
ERROR: test_chart_data_api (tests.e2e.test_dashboard_stats.TestDashboardStats.test_chart_data_api)
Verify that the Chart Data API returns correct JSON structure and data.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/doanvinhnhan/Downloads/XYZ/Báo cáo CK/fami_backend/tests/e2e/test_dashboard_stats.py", line 57, in test_chart_data_api
    url = reverse('reporting:api_chart_data')
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/doanvinhnhan/Downloads/XYZ/Báo cáo CK/fami_backend/venv/lib/python3.12/site-packages/django/urls/base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/doanvinhnhan/Downloads/XYZ/Báo cáo CK/fami_backend/venv/lib/python3.12/site-packages/django/urls/resolvers.py", line 851, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'api_chart_data' not found. 'api_chart_data' is not a valid view function or pattern name.

======================================================================
FAIL: test_core_dashboard_stats (tests.e2e.test_dashboard_stats.TestDashboardStats.test_core_dashboard_stats)
Verify that the main dashboard displays correct summary statistics.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/doanvinhnhan/Downloads/XYZ/Báo cáo CK/fami_backend/tests/e2e/test_dashboard_stats.py", line 51, in test_core_dashboard_stats
    self.assertIn("Pho Bo", content) # Recent orders table
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: 'Pho Bo' not found in '<!DOCTYPE html>\n<html lang="vi">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Dashboard - FaMÌ</title>\n\n    <!-- Bootstrap 5 CSS -->\n    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">\n    <!-- Font Awesome for Icons -->\n    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">\n\n    <style>\n        body {\n            min-height: 100vh;\n            display: flex;\n            flex-direction: column;\n            background-color: #f4f6f9;\n        }\n\n        .wrapper {\n            display: flex;\n            width: 100%;\n            align-items: stretch;\n            flex: 1;\n        }\n\n        #sidebar {\n            min-width: 250px;\n            max-width: 250px;\n            background: #2c3e50;\n            color: #fff;\n            transition: all 0.3s;\n        }\n\n        #sidebar .sidebar-header {\n            padding: 20px;\n            background: #1a252f;\n        }\n\n        #sidebar ul.components {\n            padding: 20px 0;\n            border-bottom: 1px solid #47748b;\n        }\n\n        #sidebar ul p {\n            color: #fff;\n            padding: 10px;\n        }\n\n        #sidebar ul li a {\n            padding: 15px 20px;\n            font-size: 1.1em;\n            display: block;\n            color: #ddd;\n            text-decoration: none;\n        }\n\n        #sidebar ul li a:hover {\n            color: #fff;\n            background: #34495e;\n        }\n\n        #sidebar ul li.active>a {\n            color: #fff;\n            background: #2980b9;\n        }\n\n        #content {\n            width: 100%;\n            padding: 20px;\n            min-height: 100vh;\n            transition: all 0.3s;\n        }\n\n        /* Navbar customization */\n        .navbar {\n            padding: 15px 10px;\n            background: #fff;\n            border: none;\n            border-radius: 0;\n            margin-bottom: 40px;\n            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n        }\n\n        /* Responsive adjustments */\n        @media (max-width: 768px) {\n            #sidebar {\n                margin-left: -250px;\n            }\n\n            #sidebar.active {\n                margin-left: 0;\n            }\n        }\n    </style>\n    \n</head>\n\n<body>\n\n    <div class="wrapper">\n        <!-- Sidebar -->\n        \n        <nav id="sidebar">\n            <div class="sidebar-header">\n                <h3><i class="fas fa-utensils me-2"></i>FaMÌ POS</h3>\n            </div>\n\n            <ul class="list-unstyled components">\n                <li class="active">\n                    <a href="/dashboard/"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a>\n                </li>\n                <!-- Functional Modules -->\n                <li>\n                <a href="/menu/"><i class="fas fa-book-open me-2"></i>Menu</a>\n            </li>\n                <li>\n                    <a href="/inventory/ingredients/"><i class="fas fa-boxes me-2"></i>Kho (Inventory)</a>\n                </li>\n                <li>\n                    <a href="/sales/pos/"><i class="fas fa-cash-register me-2"></i>Bán hàng (Sales)</a>\n                </li>\n                <li>\n                    <a href="/kitchen/board/"><i class="fas fa-fire me-2"></i>Bếp (KDS)</a>\n                </li>\n                <li>\n                    <a href="/reports/"><i class="fas fa-chart-line me-2"></i>Báo cáo</a>\n                </li>\n                <li>\n                    <a href="/admin/"><i class="fas fa-cogs me-2"></i>Hệ thống</a>\n                </li>\n            </ul>\n        </nav>\n        \n\n        <!-- Page Content -->\n        <div id="content">\n            \n            <nav class="navbar navbar-expand-lg navbar-light bg-light">\n                <div class="container-fluid">\n                    <button type="button" id="sidebarCollapse" class="btn btn-info text-white">\n                        <i class="fas fa-align-left"></i>\n                    </button>\n                    <div class="collapse navbar-collapse" id="navbarSupportedContent">\n                        <ul class="nav navbar-nav ms-auto">\n                            <li class="nav-item">\n                                <span class="nav-link">Xin chào, <strong>manager</strong> ({{ user.role\n                                    }})</span>\n                            </li>\n                            <li class="nav-item">\n                                <form action="/logout/" method="post" class="d-inline">\n                                    <input type="hidden" name="csrfmiddlewaretoken" value="lG2h1IlWJHG4ZwYSwyq0EYyWokE4GWyJJISwOUvVEXWXPHyth1plpdOs4kP318jF">\n                                    <button type="submit" class="btn btn-outline-danger btn-sm ms-2">\n                                        <i class="fas fa-sign-out-alt"></i> Đăng xuất\n                                    </button>\n                                </form>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </nav>\n            \n\n            <div class="container-fluid">\n                <!-- Alert Messages -->\n                \n\n                \n<div class="row mb-4">\n    <div class="col-12">\n        <h2 class="text-secondary border-bottom pb-2">\n            <i class="fas fa-tachometer-alt text-primary me-2"></i>Tổng quan hoạt động\n        </h2>\n    </div>\n</div>\n\n\n<!-- Key Metrics Cards -->\n<div class="row g-4 mb-4">\n    <div class="col-md-3">\n        <div class="card shadow-sm border-start border-primary border-4">\n            <div class="card-body">\n                <div class="d-flex justify-content-between align-items-center">\n                    <div>\n                        <p class="text-muted mb-0">Đơn hàng hôm nay</p>\n                        <h3 class="fw-bold text-primary">2</h3>\n                    </div>\n                    <div class="bg-light rounded-circle p-3 text-primary">\n                        <i class="fas fa-receipt fa-2x"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="col-md-3">\n        <div class="card shadow-sm border-start border-success border-4">\n            <div class="card-body">\n                <div class="d-flex justify-content-between align-items-center">\n                    <div>\n                        <p class="text-muted mb-0">Doanh thu tạm tính</p>\n                        <h3 class="fw-bold text-success">100,000 ₫</h3>\n                    </div>\n                    <div class="bg-light rounded-circle p-3 text-success">\n                        <i class="fas fa-coins fa-2x"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="col-md-3">\n        <div class="card shadow-sm border-start border-warning border-4">\n            <div class="card-body">\n                <div class="d-flex justify-content-between align-items-center">\n                    <div>\n                        <p class="text-muted mb-0">Bàn đang phục vụ</p>\n                        <h3 class="fw-bold text-warning">1/1</h3>\n                    </div>\n                    <div class="bg-light rounded-circle p-3 text-warning">\n                        <i class="fas fa-chair fa-2x"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="col-md-3">\n        <div class="card shadow-sm border-start border-danger border-4">\n            <div class="card-body">\n                <div class="d-flex justify-content-between align-items-center">\n                    <div>\n                        <p class="text-muted mb-0">Cảnh báo tồn kho</p>\n                        <h3 class="fw-bold text-danger">0</h3>\n                    </div>\n                    <div class="bg-light rounded-circle p-3 text-danger">\n                        <i class="fas fa-exclamation-triangle fa-2x"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="row">\n    <div class="col-md-8">\n        <div class="card shadow-sm">\n            <div class="card-header bg-white">\n                <h5 class="mb-0">Hoạt động gần đây</h5>\n            </div>\n            <div class="card-body">\n                \n                <div class="table-responsive">\n                    <table class="table table-hover align-middle">\n                        <thead>\n                            <tr>\n                                <th>Mã Đơn #</th>\n                                <th>Bàn</th>\n                                <th>Thời gian</th>\n                                <th>Tổng tiền</th>\n                                <th>Trạng thái</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            \n                            <tr>\n                                <td>#2</td>\n                                <td>T1</td>\n                                <td>11:14</td>\n                                <td>0 ₫</td>\n                                <td>\n                                    <span class="badge \n                                        bg-secondary">\n                                        Pending\n                                    </span>\n                                </td>\n                            </tr>\n                            \n                            <tr>\n                                <td>#1</td>\n                                <td>T1</td>\n                                <td>11:14</td>\n                                <td>100,000 ₫</td>\n                                <td>\n                                    <span class="badge \n                                        bg-secondary">\n                                        Paid\n                                    </span>\n                                </td>\n                            </tr>\n                            \n                        </tbody>\n                    </table>\n                </div>\n                \n            </div>\n        </div>\n    </div>\n    <div class="col-md-4">\n        <div class="card shadow-sm">\n            <div class="card-header bg-white">\n                <h5 class="mb-0">Thao tác nhanh</h5>\n            </div>\n            <div class="list-group list-group-flush">\n                <a href="/sales/pos/" class="list-group-item list-group-item-action">\n                    <i class="fas fa-plus-circle text-primary me-2"></i>Tạo đơn mới\n                </a>\n                <a href="/inventory/ingredients/" class="list-group-item list-group-item-action">\n                    <i class="fas fa-box-open text-success me-2"></i>Nhập kho\n                </a>\n                <a href="/reports/" class="list-group-item list-group-item-action">\n                    <i class="fas fa-file-invoice text-info me-2"></i>Xem báo cáo ngày\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n\n            </div>\n        </div>\n    </div>\n\n    <!-- Bootstrap 5 JS Bundle -->\n    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>\n    <script>\n        // Simple Sidebar Toggle Logic\n        document.addEventListener("DOMContentLoaded", function () {\n            const sidebarCollapse = document.getElementById(\'sidebarCollapse\');\n            const sidebar = document.getElementById(\'sidebar\');\n            if (sidebarCollapse) {\n                sidebarCollapse.addEventListener(\'click\', function () {\n                    sidebar.classList.toggle(\'active\');\n                });\n            }\n        });\n    </script>\n    \n</body>\n\n</html>'

----------------------------------------------------------------------
Ran 2 tests in 0.362s

FAILED (failures=1, errors=1)
Destroying test database for alias 'default'...
